<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt" xml:lang="pt"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dransfeld, N. M.">
<meta name="description" content="Este artigo fornece uma visão geral do Docker, incluindo imagens, contêineres, Dockerfile e principais comandos Docker.">

<title>Docker Dicas e Truques</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/site_icon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PGRFF9TPBC"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-PGRFF9TPBC', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../CSS/styles.css">
<link rel="stylesheet" href="../../CSS/Buttons.css">
<meta property="og:title" content="Docker Dicas e Truques">
<meta property="og:description" content="Este artigo fornece uma visão geral do Docker, incluindo imagens, contêineres, Dockerfile e principais comandos Docker.">
<meta property="og:image" content="https://nionmaron.com/posts/0009 Docker-Dicas-e-Truques-pt/docker2.png">
<meta property="og:site_name" content="NionMaron">
<meta property="og:image:height" content="264">
<meta property="og:image:width" content="449">
<meta name="twitter:title" content="Docker Dicas e Truques">
<meta name="twitter:description" content="Este artigo fornece uma visão geral do Docker, incluindo imagens, contêineres, Dockerfile e principais comandos Docker.">
<meta name="twitter:image" content="https://nionmaron.com/posts/0009 Docker-Dicas-e-Truques-pt/docker2.png">
<meta name="twitter:image-height" content="264">
<meta name="twitter:image-width" content="449">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">NionMaron</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Procurar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Alternar de navegação" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../Blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Flashcards.html"> 
<span class="menu-text">Flashcards</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-about-nion" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">About Nion</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-about-nion">    
        <li>
    <a class="dropdown-item" href="../../Portfolio.html">
 <span class="dropdown-text">Portfolio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../CV.html">
 <span class="dropdown-text">CV</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.linkedin.com/in/nionmaron/?locale=en_US"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="dropdown-text"></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/nionmaron"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text"></span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo escuro"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Nesta página</h2>
   
  <ul>
  <li><a href="#introdução" id="toc-introdução" class="nav-link active" data-scroll-target="#introdução">Introdução</a></li>
  <li><a href="#imagens-docker" id="toc-imagens-docker" class="nav-link" data-scroll-target="#imagens-docker">Imagens Docker</a></li>
  <li><a href="#contêineres-docker" id="toc-contêineres-docker" class="nav-link" data-scroll-target="#contêineres-docker">Contêineres Docker</a></li>
  <li><a href="#principais-comandos-docker" id="toc-principais-comandos-docker" class="nav-link" data-scroll-target="#principais-comandos-docker">Principais Comandos Docker</a>
  <ul class="collapse">
  <li><a href="#comandos-de-imagem" id="toc-comandos-de-imagem" class="nav-link" data-scroll-target="#comandos-de-imagem">Comandos de Imagem</a></li>
  <li><a href="#comandos-de-contêiner" id="toc-comandos-de-contêiner" class="nav-link" data-scroll-target="#comandos-de-contêiner">Comandos de Contêiner</a></li>
  <li><a href="#comandos-de-rede" id="toc-comandos-de-rede" class="nav-link" data-scroll-target="#comandos-de-rede">Comandos de Rede</a></li>
  <li><a href="#comandos-de-volume" id="toc-comandos-de-volume" class="nav-link" data-scroll-target="#comandos-de-volume">Comandos de Volume</a></li>
  <li><a href="#comandos-de-registro" id="toc-comandos-de-registro" class="nav-link" data-scroll-target="#comandos-de-registro">Comandos de Registro</a></li>
  <li><a href="#comandos-de-sistema" id="toc-comandos-de-sistema" class="nav-link" data-scroll-target="#comandos-de-sistema">Comandos de Sistema</a></li>
  <li><a href="#comandos-de-configuração" id="toc-comandos-de-configuração" class="nav-link" data-scroll-target="#comandos-de-configuração">Comandos de Configuração</a></li>
  <li><a href="#comandos-de-logs-e-inspeção" id="toc-comandos-de-logs-e-inspeção" class="nav-link" data-scroll-target="#comandos-de-logs-e-inspeção">Comandos de Logs e Inspeção</a></li>
  </ul></li>
  <li><a href="#dockerfile" id="toc-dockerfile" class="nav-link" data-scroll-target="#dockerfile">Dockerfile</a>
  <ul class="collapse">
  <li><a href="#benefícios-do-dockerfile" id="toc-benefícios-do-dockerfile" class="nav-link" data-scroll-target="#benefícios-do-dockerfile">Benefícios do Dockerfile</a></li>
  </ul></li>
  <li><a href="#docker-compose" id="toc-docker-compose" class="nav-link" data-scroll-target="#docker-compose">Docker Compose</a></li>
  <li><a href="#conclusão" id="toc-conclusão" class="nav-link" data-scroll-target="#conclusão">Conclusão</a></li>
  <li><a href="#referências" id="toc-referências" class="nav-link" data-scroll-target="#referências">Referências</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><strong>Docker Dicas e Truques</strong></h1>
  <div class="quarto-categories">
    <div class="quarto-category">Docker</div>
    <div class="quarto-category">Dockerfile</div>
    <div class="quarto-category">Português</div>
  </div>
  </div>

<div>
  <div class="description">
    <p>Este artigo fornece uma visão geral do Docker, incluindo imagens, contêineres, Dockerfile e principais comandos Docker.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor</div>
    <div class="quarto-title-meta-contents">
             <p>Dransfeld, N. M. </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Data de Publicação</div>
    <div class="quarto-title-meta-contents">
      <p class="date">25 de julho de 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introdução" class="level2">
<h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>Docker é uma plataforma que permite a criação, envio e execução de aplicativos em contêineres. Contêineres são unidades padronizadas de software que empacotam o código do aplicativo e todas as suas dependências para que o aplicativo possa ser executado de maneira rápida e confiável em diferentes ambientes de computação. No cerne do Docker estão dois conceitos-chave: <strong>imagens e contêineres</strong>.</p>
<div class="grid">
<div class="g-col-12">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="containers3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%" alt="Aplicativos nos contêineres Docker"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="imagens-docker" class="level2">
<h2 class="anchored" data-anchor-id="imagens-docker">Imagens Docker</h2>
<div style="text-align: justify">
<p>Uma imagem Docker é um pacote imutável que contém tudo o que é necessário para executar uma aplicação: código-fonte, bibliotecas, dependências, ferramentas e arquivos de configuração. As imagens são construídas a partir de um arquivo chamado Dockerfile, que contém uma lista de instruções sobre como criar a imagem.</p>
<p>Estrutura de uma Imagem Docker:</p>
<ul>
<li><p><strong>Dockerfile:</strong> Um arquivo de texto com comandos que a CLI do Docker pode executar para montar uma imagem. Cada comando no Dockerfile cria uma camada na imagem, que é uma maneira eficiente de fazer alterações sem recriar a imagem inteira.</p></li>
<li><p><strong>Base Image:</strong> A imagem base é a camada inicial da imagem. Pode ser um sistema operacional básico ou uma imagem preexistente.</p></li>
<li><p><strong>Layers:</strong> Cada instrução no Dockerfile cria uma nova camada na imagem. Por exemplo, a instalação de uma biblioteca ou a cópia de arquivos para o contêiner criam camadas separadas.</p></li>
<li><p><strong>Metadata:</strong> Informações sobre a imagem, como autor, versão, descrição, etc., são incluídas no Dockerfile e armazenadas na imagem.</p></li>
</ul>
</div>
</section>
<section id="contêineres-docker" class="level2">
<h2 class="anchored" data-anchor-id="contêineres-docker">Contêineres Docker</h2>
<div style="text-align: justify">
<p>Um contêiner é uma instância em execução de uma imagem Docker. Ele pode ser visto como um ambiente de execução leve e portátil que compartilha o kernel do sistema operacional host, mas é isolado dos demais processos do sistema.</p>
<p>Estrutura de Funcionamento de um Contêiner Docker:</p>
<ul>
<li><p><strong>Inicialização do Contêiner:</strong> Quando você executa um contêiner a partir de uma imagem, o Docker cria uma camada de escrita no topo das camadas da imagem e inicia um processo para executar a aplicação.</p></li>
<li><p><strong>Namespace Isolation:</strong> Docker utiliza namespaces do kernel do Linux para fornecer um ambiente isolado para o contêiner. Isso inclui separação de rede, PID, montagens de sistema de arquivos e outros aspectos.</p></li>
<li><p><strong>Control Groups (cgroups):</strong> Docker usa cgroups para limitar e monitorar o uso de recursos (CPU, memória, IO, etc.) por um contêiner.</p></li>
<li><p><strong>Union File System (UnionFS):</strong> As imagens são construídas em camadas usando um sistema de arquivos union, que permite criar camadas de leitura e gravação de forma eficiente.</p></li>
<li><p><strong>Networking:</strong> Contêineres podem ser conectados a várias redes virtuais. Docker configura automaticamente uma rede padrão, mas você pode definir redes personalizadas.</p></li>
<li><p><strong>Storage:</strong> Contêineres usam volumes para persistir dados além do ciclo de vida do contêiner. Volumes podem ser montados em diferentes contêineres para compartilhar dados.</p></li>
</ul>
</div>
</section>
<section id="principais-comandos-docker" class="level2">
<h2 class="anchored" data-anchor-id="principais-comandos-docker">Principais Comandos Docker</h2>
<div style="text-align: justify">
<p>Docker fornece uma variedade de comandos para gerenciar imagens, contêineres, volumes, redes e mais. Aqui estão alguns dos principais comandos Docker, junto com suas explicações:</p>
</div>
<section id="comandos-de-imagem" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-imagem">Comandos de Imagem</h3>
<ul>
<li><strong>docker build:</strong> Constrói uma imagem Docker a partir de um Dockerfile.</li>
<li><strong>docker pull:</strong> Baixa uma imagem do Docker Hub ou de um registro de contêiner.</li>
<li><strong>docker push:</strong> Envia uma imagem Docker para um registro.</li>
<li><strong>docker images:</strong> Lista as imagens Docker no host.</li>
<li><strong>docker rmi:</strong> Remove uma ou mais imagens Docker.</li>
<li><strong>docker tag:</strong> Adiciona uma tag a uma imagem Docker.</li>
<li><strong>docker history:</strong> Exibe o histórico de uma imagem Docker.</li>
<li><strong>docker save:</strong> Salva uma ou mais imagens Docker em um arquivo tar.</li>
<li><strong>docker load:</strong> Carrega uma ou mais imagens Docker de um arquivo tar.</li>
<li><strong>docker commit:</strong> Cria uma nova imagem a partir de um contêiner em execução.</li>
<li><strong>docker inspect:</strong> Exibe informações detalhadas sobre uma imagem Docker.</li>
<li><strong>docker search:</strong> Procura imagens Docker em um registro.</li>
</ul>
</section>
<section id="comandos-de-contêiner" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-contêiner">Comandos de Contêiner</h3>
<ul>
<li><strong>docker run:</strong> Executa um contêiner a partir de uma imagem.</li>
<li><strong>docker start:</strong> Inicia um contêiner parado.</li>
<li><strong>docker stop:</strong> Para um contêiner em execução.</li>
<li><strong>docker restart:</strong> Reinicia um contêiner.</li>
<li><strong>docker pause:</strong> Pausa a execução de um contêiner.</li>
<li><strong>docker unpause:</strong> Retoma a execução de um contêiner pausado.</li>
<li><strong>docker kill:</strong> Força a parada de um contêiner.</li>
<li><strong>docker rm:</strong> Remove um ou mais contêineres.</li>
<li><strong>docker ps:</strong> Lista os contêineres em execução.</li>
<li><strong>docker ps -a:</strong> Lista todos os contêineres no host.</li>
<li><strong>docker logs:</strong> Exibe os logs de um contêiner.</li>
<li><strong>docker exec:</strong> Executa um comando em um contêiner em execução.</li>
<li><strong>docker attach:</strong> Conecta-se a um contêiner em execução.</li>
<li><strong>docker cp:</strong> Copia arquivos entre o host e um contêiner.</li>
<li><strong>docker top:</strong> Exibe os processos em execução em um contêiner.</li>
<li><strong>docker stats:</strong> Exibe estatísticas de uso de recursos de um contêiner.</li>
<li><strong>docker inspect:</strong> Exibe informações detalhadas sobre um contêiner.</li>
<li><strong>docker diff:</strong> Exibe as alterações feitas em um contêiner.</li>
<li><strong>docker commit:</strong> Cria uma nova imagem a partir de um contêiner em execução.</li>
</ul>
</section>
<section id="comandos-de-rede" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-rede">Comandos de Rede</h3>
<ul>
<li><strong>docker network ls:</strong> Lista as redes Docker no host.</li>
<li><strong>docker network create:</strong> Cria uma nova rede Docker.</li>
<li><strong>docker network rm:</strong> Remove uma ou mais redes Docker.</li>
<li><strong>docker network inspect:</strong> Exibe informações detalhadas sobre uma rede Docker.</li>
<li><strong>docker network connect:</strong> Conecta um contêiner a uma rede.</li>
<li><strong>docker network disconnect:</strong> Desconecta um contêiner de uma rede.</li>
<li><strong>docker network prune:</strong> Remove todas as redes não utilizadas.</li>
<li><strong>docker network inspect:</strong> Exibe informações detalhadas sobre uma rede Docker.</li>
<li><strong>docker network connect:</strong> Conecta um contêiner a uma rede.</li>
<li><strong>docker network disconnect:</strong> Desconecta um contêiner de uma rede.</li>
<li><strong>docker network prune:</strong> Remove todas as redes não utilizadas.</li>
</ul>
</section>
<section id="comandos-de-volume" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-volume">Comandos de Volume</h3>
<ul>
<li><strong>docker volume ls:</strong> Lista os volumes Docker no host.</li>
<li><strong>docker volume create:</strong> Cria um novo volume Docker.</li>
<li><strong>docker volume rm:</strong> Remove um ou mais volumes Docker.</li>
<li><strong>docker volume inspect:</strong> Exibe informações detalhadas sobre um volume Docker.</li>
<li><strong>docker volume prune:</strong> Remove todos os volumes não utilizados.</li>
</ul>
</section>
<section id="comandos-de-registro" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-registro">Comandos de Registro</h3>
<ul>
<li><strong>docker login:</strong> Faz login em um registro de contêiner.</li>
<li><strong>docker logout:</strong> Faz logout de um registro de contêiner.</li>
<li><strong>docker search:</strong> Procura imagens Docker em um registro.</li>
<li><strong>docker push:</strong> Envia uma imagem Docker para um registro.</li>
<li><strong>docker pull:</strong> Baixa uma imagem do Docker Hub ou de um registro de contêiner.</li>
<li><strong>docker tag:</strong> Adiciona uma tag a uma imagem Docker.</li>
</ul>
</section>
<section id="comandos-de-sistema" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-sistema">Comandos de Sistema</h3>
<ul>
<li><strong>docker info:</strong> Exibe informações sobre o host Docker.</li>
<li><strong>docker version:</strong> Exibe a versão do Docker instalada.</li>
<li><strong>docker system df:</strong> Exibe informações sobre o uso de espaço no host.</li>
<li><strong>docker system prune:</strong> Remove todos os contêineres parados, imagens não utilizadas, volumes e redes não utilizadas.</li>
<li><strong>docker system events:</strong> Exibe eventos do sistema em tempo real.</li>
<li><strong>docker system info:</strong> Exibe informações detalhadas sobre o sistema Docker.</li>
<li><strong>docker system top:</strong> Exibe os processos em execução em todos os contêineres.</li>
</ul>
</section>
<section id="comandos-de-configuração" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-configuração">Comandos de Configuração</h3>
<ul>
<li><strong>docker config ls:</strong> Lista as configurações do Docker.</li>
<li><strong>docker config create:</strong> Cria uma nova configuração do Docker.</li>
<li><strong>docker config rm:</strong> Remove uma ou mais configurações do Docker.</li>
<li><strong>docker config inspect:</strong> Exibe informações detalhadas sobre uma configuração do Docker.</li>
<li><strong>docker config export:</strong> Exporta uma configuração do Docker para um arquivo.</li>
<li><strong>docker config import:</strong> Importa uma configuração do Docker de um arquivo.</li>
<li><strong>docker config attach:</strong> Anexa uma configuração a um serviço.</li>
<li><strong>docker config detach:</strong> Desanexa uma configuração de um serviço.</li>
<li><strong>docker config prune:</strong> Remove todas as configurações não utilizadas.</li>
<li><strong>docker config inspect:</strong> Exibe informações detalhadas sobre uma configuração do Docker.</li>
</ul>
</section>
<section id="comandos-de-logs-e-inspeção" class="level3">
<h3 class="anchored" data-anchor-id="comandos-de-logs-e-inspeção">Comandos de Logs e Inspeção</h3>
<ul>
<li><strong>docker logs:</strong> Exibe os logs de um contêiner.</li>
<li><strong>docker logs -f:</strong> Exibe os logs de um contêiner em tempo real.</li>
<li><strong>docker logs –tail:</strong> Exibe as últimas linhas de logs de um contêiner.</li>
<li><strong>docker logs –since:</strong> Exibe os logs de um contêiner desde um determinado momento.</li>
<li><strong>docker logs –until:</strong> Exibe os logs de um contêiner até um determinado momento.</li>
<li><strong>docker stats:</strong> Exibe estatísticas de uso de recursos de um contêiner.</li>
<li><strong>docker stats –all:</strong> Exibe estatísticas de uso de recursos de todos os contêineres no host.</li>
<li><strong>docker stats –format:</strong> Formata a saída das estatísticas de uso de recursos.</li>
<li><strong>docker stats –no-stream:</strong> Exibe as estatísticas de uso de recursos uma única vez.</li>
<li><strong>docker stats –no-trunc:</strong> Exibe as estatísticas de uso de recursos sem truncar os valores.</li>
</ul>
</section>
</section>
<section id="dockerfile" class="level2">
<h2 class="anchored" data-anchor-id="dockerfile">Dockerfile</h2>
<div style="text-align: justify">
<p>Um Dockerfile é um script de texto simples que contém uma série de instruções que a CLI do Docker (Interface de Linha de Comando) interpreta para criar uma imagem Docker. Ele define todos os passos necessários para criar uma imagem que pode ser usada para instanciar contêineres. Essencialmente, o Dockerfile automatiza a configuração e a montagem de um ambiente de execução de software.</p>
<p><strong>FROM:</strong> Define a imagem base a partir da qual você está construindo. Esta é a primeira instrução de um Dockerfile.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">FROM</span> ubuntu:20.04</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>RUN:</strong> Executa um comando no contêiner durante a construção da imagem. É usado para instalar pacotes e configurar o ambiente.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">RUN</span> apt-get update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> python3</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>COPY:</strong> Copia arquivos ou diretórios do sistema de arquivos do host para o sistema de arquivos do contêiner.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">COPY</span> . /app</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>ADD:</strong> Similar ao COPY, mas também pode descompactar arquivos locais e fazer download de URLs.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ADD</span> https://example.com/file.tar.gz /app/</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>WORKDIR:</strong> Define o diretório de trabalho para qualquer instrução RUN, CMD, ENTRYPOINT, COPY e ADD subsequente.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">WORKDIR</span> /app</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>CMD:</strong> Fornece um comando padrão para ser executado quando um contêiner é iniciado a partir da imagem. Só pode haver um CMD por Dockerfile.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">CMD</span> [<span class="st">"python3"</span>, <span class="st">"app.py"</span>]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>ENTRYPOINT:</strong> Define um comando que sempre será executado quando o contêiner iniciar. Pode ser combinado com CMD.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ENTRYPOINT</span> [<span class="st">"python3"</span>, <span class="st">"app.py"</span>]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>ENV:</strong> Define variáveis de ambiente.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ENV</span> APP_ENV=production</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>EXPOSE:</strong> Informa ao Docker que o contêiner escuta na(s) porta(s) especificada(s) em tempo de execução.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">EXPOSE</span> 8080</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>VOLUME:</strong> Cria um ponto de montagem com o nome especificado e marca-o como um volume.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">VOLUME</span> /data</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="benefícios-do-dockerfile" class="level3">
<h3 class="anchored" data-anchor-id="benefícios-do-dockerfile">Benefícios do Dockerfile</h3>
<div style="text-align: justify">
<ul>
<li><strong>Reprodutibilidade:</strong> O Dockerfile permite que você defina o ambiente de execução de forma consistente, garantindo que a aplicação se comporte da mesma maneira em diferentes ambientes.</li>
<li><strong>Automatização:</strong> O Dockerfile automatiza a configuração e a montagem de um ambiente de execução de software, economizando tempo e esforço.</li>
<li><strong>Controle de Versão:</strong> O Dockerfile é um arquivo de texto simples que pode ser versionado e controlado com ferramentas de controle de versão como Git.</li>
<li><strong>Flexibilidade:</strong> O Dockerfile oferece flexibilidade para personalizar o ambiente de execução da aplicação, adicionando ou removendo dependências conforme necessário.</li>
<li><strong>Eficiência:</strong> O Dockerfile cria camadas de imagem que são reutilizadas entre builds, tornando o processo de construção mais eficiente.</li>
<li><strong>Padronização:</strong> O Dockerfile permite padronizar a construção de imagens Docker em toda a organização, garantindo consistência e conformidade.</li>
<li><strong>Segurança:</strong> O Dockerfile permite definir um ambiente de execução seguro, limitando as dependências e as permissões do contêiner.</li>
<li><strong>Portabilidade:</strong> O Dockerfile facilita a migração de aplicativos entre diferentes ambientes de computação, garantindo que a aplicação se comporte da mesma maneira em qualquer lugar.</li>
</ul>
</div>
</section>
</section>
<section id="docker-compose" class="level2">
<h2 class="anchored" data-anchor-id="docker-compose">Docker Compose</h2>
<div style="text-align: justify">
<p>Docker compose é uma ferramenta para definir e executar aplicativos Docker multi-contêiner em um único arquivo YAML. Ele permite que você defina a configuração de todos os serviços, redes e volumes em um único arquivo, facilitando a execução de aplicativos complexos com várias partes.</p>
<ul>
<li><strong>docker-compose:</strong> Define e executa aplicativos Docker multi-contêiner em um único arquivo YAML.</li>
<li><strong>docker-compose up:</strong> Cria e inicia contêineres definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose down:</strong> Para e remove contêineres definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose build:</strong> Constrói ou reconstrói serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose ps:</strong> Lista os serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose logs:</strong> Exibe os logs de serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose exec:</strong> Executa um comando em um serviço definido em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose pull:</strong> Baixa as imagens dos serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose restart:</strong> Reinicia os serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose stop:</strong> Para os serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose rm:</strong> Remove os contêineres definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose config:</strong> Valida e exibe a configuração de um arquivo docker-compose.yml.</li>
<li><strong>docker-compose events:</strong> Exibe eventos de serviço em tempo real.</li>
<li><strong>docker-compose images:</strong> Lista as imagens usadas pelos serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose kill:</strong> Força a parada dos serviços definidos em um arquivo docker-compose.yml.</li>
<li><strong>docker-compose pause:</strong> Pausa os serviços definidos em um arquivo docker-compose.yml.</li>
</ul>
</div>
</section>
<section id="conclusão" class="level2">
<h2 class="anchored" data-anchor-id="conclusão">Conclusão</h2>
<div style="text-align: justify">
<p>O Docker é uma ferramenta poderosa para executar aplicativos em contêineres, oferecendo portabilidade, eficiência e segurança. Com o Dockerfile, você pode definir o ambiente de execução de forma consistente e automatizada, garantindo que a aplicação se comporte da mesma maneira em diferentes ambientes. Esperamos que essas dicas e truques de Docker sejam úteis para você ao trabalhar com contêineres e imagens Docker.</p>
</div>
</section>
<section id="referências" class="level2">
<h2 class="anchored" data-anchor-id="referências">Referências</h2>
<ul>
<li><a href="https://docs.docker.com/">Docker Documentation</a></li>
<li><a href="https://docs.docker.com/engine/reference/builder/">Dockerfile Reference</a></li>
<li><a href="https://www.docker.com/resources/what-container">Docker Overview</a></li>
<li><a href="https://hub.docker.com/">Docker Hub</a></li>
<li><a href="https://docs.docker.com/compose/">Docker Compose</a></li>
</ul>
<hr>
<p><strong>#Docker #Dockerfile #Microservices #DevOps</strong></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiada");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/nionmaron\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Developed by <a href="https://nionmaron.com">Nion M. Dransfeld</a></p>
</div>   
    <div class="nav-footer-center">
<p><a href="https://github.com/nionmaron/Website-NionMaron/">Edit this page</a> <br> <a href="https://github.com/nionmaron/Website-NionMaron/issues">Report an issue</a></p>
</div>
    <div class="nav-footer-right">
<p><a href="../../ts-and-cs.html">Terms &amp; Conditions</a></p>
</div>
  </div>
</footer>




</body></html>